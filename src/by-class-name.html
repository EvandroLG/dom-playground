<!doctype html>
<html>
  <head>
    <title>Implementation of getElementsByClassName</title>
  </head>
  <body>
    <div class="root">
      <div class="a" id="a-1">
        <span class="b"></span>
        <div class="a" id="a-2"></div>
      </div>
      <div class="a" id="a-3">
        <div class="a" id="a-4"></div>
        <div class="b"></div>
        <div class="b">
          <div class="a" id="a-5">
            <span class="a" id="a-6"></span>
          </div>
        </div>
      </div>
    </div>

    <div class="result"></div>

    <script>
      function byClassName(root, className) {
        return (function byClassNameHelper(element, result = []) {
          if (!element) {
            return;
          }

          const children = [...element.children];

          for (const child of children) {
            if (child.classList.contains(className)) {
              result.push(child);
            }

            byClassNameHelper(child, result);
          }

          return result;
        })(root ? root : document.body);
      }

      function onReady() {
        const elements = {};
        elements.root = byClassName(undefined, 'root')[0];
        elements.result = byClassName(undefined, 'result')[0];

        elements.result.textContent = byClassName(elements.root, 'a').map(item => item.id);
      }

      document.addEventListener('DOMContentLoaded', onReady, false);
    </script>
  </body>
</html>
